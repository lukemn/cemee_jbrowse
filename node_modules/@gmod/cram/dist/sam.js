'use strict';

var _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _toArray2 = require('babel-runtime/helpers/toArray');

var _toArray3 = _interopRequireDefault(_toArray2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function parseHeaderText(text) {
  var lines = text.split(/\r?\n/);
  var data = [];
  lines.forEach(function (line) {
    var _line$split = line.split(/\t/),
        _line$split2 = (0, _toArray3.default)(_line$split),
        tag = _line$split2[0],
        fields = _line$split2.slice(1);

    var parsedFields = fields.map(function (f) {
      var _f$split = f.split(':', 2),
          _f$split2 = (0, _slicedToArray3.default)(_f$split, 2),
          fieldTag = _f$split2[0],
          value = _f$split2[1];

      return { tag: fieldTag, value: value };
    });
    if (tag) data.push({ tag: tag.substr(1), data: parsedFields });
  });
  return data;
}

module.exports = { parseHeaderText: parseHeaderText };